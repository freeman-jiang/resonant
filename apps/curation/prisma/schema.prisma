generator client {
  provider             = "prisma-client-py"
  recursive_type_depth = "5"
  interface            = "asyncio"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Link {
  id         Int      @id @default(autoincrement())
  text       String
  url        String   @unique
  parent_url String
  depth      Float    @default(0)
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  page         Page?  @relation("SourceLink")
  outbound_for Page[] @relation("OutboundLink")
}

model Page {
  id             Int      @id @default(autoincrement())
  title          String?
  date           String?
  author         String?
  content        String
  link           Link     @relation("SourceLink", fields: [linkId], references: [id])
  linkId         Int      @unique
  outbound_links Link[]   @relation("OutboundLink")
  created_at     DateTime @default(now())
  updated_at     DateTime @updatedAt
}
